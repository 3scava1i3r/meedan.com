/////////////////////////// Imports
@import "compass/reset";
@import "compass/css3";
@import "colors";
@import "animation";
@import "transitions";
@import "clearfix";

/////////////////////////// Breakpoint
$breakpoint: 35em;

/////////////////////////// Fonts
@import url(http://fonts.googleapis.com/css?family=Open+Sans:400,300,700,600);

/////////////////////////// Base styles
///
/// Later in the cascade, these are overridden for different sites.
///
body {
  padding-bottom: 1em;
  font-size: 1.3em;
  font-family: "open sans", "helvetica neue", "helvetica";
  line-height: 1.5;
  @media all and (max-width: $breakpoint) {
    padding-bottom: 0.5em;
    font-size: 1em;
  }
  text-align: center;
  font-weight: 300;
  background-color: lighten($warm-grey, 10%);
  color: #373737;
}

em {
  font-weight: bold;
}

a {
  color: $accent-blue;
  text-decoration: none;
  border-bottom: 3px $light-blue solid;
  @media all and (max-width: $breakpoint) {
    border-bottom-width: 2px;
    font-weight: 700;
  }
}

///////////////////////// Definitions
///
dl {
  font-family: baskerville, palatino, georgia, serif;
  dfn {
    font-weight: 500;
    font-size: 1.8em;
    display: none;
  }
  dd {
    display: inline;
  }
  .definition {
    font-size: 0.8em;
    @media all and (max-width: $breakpoint) {
      font-size: 1em;
    }
  }
  dd.part-of-speech,
  dd.pronunciation {
    display: inline;
  }
  dt {}
  em {
    font-weight: 100;
    font-size: 0.8em;
    font-style: italic;
  }
  i {
    display: inline;
  }
  abbr {
    font-family: monospace;
  }
}

///////////////////////// Lists
///
ul {
  text-align: center;
  margin: 1em 0;
  @media all and (max-width: $breakpoint) {
    margin-top: 0.5em 0 1em;
  }
}

.partners,
.partners a {
  border-bottom-width: 1px;
  font-weight: 300;
}

li {
  display: inline-block;
  padding: 0 1em 1em;
  @media all and (max-width: $breakpoint) {
    padding: 0 0.5em 0.5em;
    display: block;
  }
}

li > a {
  @media all and (max-width: $breakpoint) {
    background: rgba($warm-grey, 0.4);
    padding: 1em;
    display: block;
  }
}

p, li {
  max-width: 30em;
}

p {
  padding: 1em;
  display: block;
  margin: 0 auto;
  @media all and (max-width: $breakpoint) {
    padding: 1em 0.7em;
    line-height: 1.65;
  }
}

main > div {
  padding: 1.4em;
  border-bottom: 4px solid lighten($warm-grey, 2%);
  &:last-of-type {
    border-bottom-width: 0;
  }
}

/////////////////////////// Logo
///
#logo {
  padding: 1em 0;
  display: inline-block;
  width: 170px;
  @media all and (max-width: $breakpoint) {
    width: 80px;
  }
}

/////////////////////////// Navigations
///
nav {
  padding: 2em 0 1.5em;
  @media all and (max-width: $breakpoint) {
    padding: 1em 0 0.75em;
  }
}

h1 {
  font-family: "open sans";
  font-weight: 200;
  line-height: 1.2;
  font-size: 2em;
  @media all and (max-width: $breakpoint) {
    font-size: 1.4em !important;
    font-weight: 400;
  }
}

h2, h3 {
  font-weight: 500;
  font-family: "open sans", "helvetica neue", "helvetica";
  text-transform: uppercase;
  padding: 1em;
  line-height: 1.2;
  @media all and (max-width: $breakpoint) {
    padding: 0.5em;
  }
  display: block;
}

/////////////////////////// Hed
///
.hed {
  color: $darkest-color;
  padding: 1em 1em 2em;
  text-align: center;
  @media all and (max-width: $breakpoint) {
    padding: 0.5em 1em 0.4em;
  }
}

/////////////////////////// Latest
/// (Blog post section)
///
.latest {
  // color: rgba(black, 0.4);
  position: relative;
  color: white;
  font-weight: 500;
  height: 20em;
  padding-top: 10em;
  @include background(linear-gradient(left top, rgba(black, 0.3), rgba(black, 0.5)), inline-image("tom_ed_an_checkdesk_knight_polaroid.png"));
  // @include background(inline-image("tom_ed_an_checkdesk_knight_polaroid.png"));
  @include filter(greyscale, 80%);
  background: {
    size: cover;
    position: -40px;
  };
  h3, p {
    text-align: left;
    margin: 0;
  }
  p {
    font-size: 0.8em;
  }
  h3 {
    color: rgba(white, 0.8);
  }
  a {
    color: white;
  }
  p:last-of-type a:last-of-type {
    @include border-radius(4px);
    padding: 0.2em;
    background-color: darken($light-blue, 50%);
    color: rgba(white, 0.8);
    border-bottom-width: 0;
  }
}

.photo.attribution {
  font-size: 0.75em;
  position: absolute;
  bottom: 0;
  right: 0;
  color: rgba(white, 0.4);
  width: 200px;
  text-align: right;
}

/////////////////////////// Media Coverage
/// (With inverted color scheme)
///

$color-stop-light: hsla(170, 50%, 45%, 0.1);
$color-stop-dark: hsla(0, 0, 0, 0.3);

.media-coverage {
  position: relative;
  @include background(linear-gradient(left top, $color-stop-light, $color-stop-light), linear-gradient(left top, $color-stop-dark, $darkest-color), inline-image("a.jpg"));
  color: desaturate(darken($warm-grey, 20%), 80%);
  font-weight: 400;
  h3 {
    color: white;
  }
  a {
    color: white;
    border-bottom-color: rgba(white, 0.2);
  }
  @include filter(greyscale, 100%);
}

/////////////////////////// Closure
///
div.closure {
  padding: 5em;
  font-size: 0.8em;
}

/////////////////////////// Contact information
///
.vcard {
  margin-top: 4em;
  font-size: 0.8em;
  font-weight: 200;
  div {
    @include reset-box-model;
  }
  color: darken($warm-grey, 20%);
  a {
    color: darken($warm-grey, 20%);
    text-decoration: underline;
    border-bottom-width: 0;
  }
  .org {
    color: darken($warm-grey, 20%);
  }
}

/////////////////////////// Extrawide mode
/// Multiple columns
///
@media all and (min-width: 1800px) {
  body {
    @include columns(2);
    padding: 1em;
  }
  div.partners,
  main > div,
  main > nav {
    border-bottom-width: 0;
    column-break-inside: avoid;
  }
}